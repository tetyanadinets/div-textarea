<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Div_Textarea</title>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<ul>
    <li>Ctrl-E для начала редактирования.</li>
    <li>Во время редактирования: Ctrl-S для сохранения, Esc для отмены.</li>
  </ul>

  	<textarea id="area"></textarea>
	<div id="view">Текст</div>


	<script type="text/javascript">
		;(function(){

		    document.onkeydown = function(e) {
		      if (e.keyCode == 27) { // escape
		        cancel();
		        return false;
		      }

		      if ((e.ctrlKey && e.keyCode == 'E'.charCodeAt(0)) && !area.offsetHeight) {
		        edit();
		        return false;
		      }

		      if ((e.ctrlKey && e.keyCode == 'S'.charCodeAt(0)) && area.offsetHeight) {
		        save();
		        return false;
		      }
		    }

		    function edit() {
		      view.style.display = 'none';
		      area.value = view.innerHTML;
		      area.style.display = 'block';
		      area.focus();
		    }

		    function save() {
		      area.style.display = 'none';
		      view.innerHTML = area.value;
		      view.style.display = 'block';
		    }

		    function cancel() {
		      area.style.display = 'none';
		      view.style.display = 'block';
		    }

		})();

	</script>
</body>
</html>
